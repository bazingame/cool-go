# 绘制图表 go-charts

## 1. echarts 是什么？

[echarts](https://echarts.apache.org/zh/index.html) 是百度开发图表库，对于经常需要图表展示的开发者来说，是一个非常大的福利。

## 2. 为什么那么受欢迎？

- 丰富的图表类型，条形、折线、饼型、等等应有尽有，还有很多创造性的图形 及主体方案
- 强劲的渲染引擎
- 专业的数据分析 
- 优雅的可视化设计
- 健康的开源社区
- 友好的无障碍访问

## 3. 怎么使用

下载扩展库 `github.com/go-echarts/go-echarts/v2/charts` 即可使用。

1. 一个简单的条形图

   步骤如下：
    - New 一个条形图对象
    - 设置 标题 和 子标题
    - 设置 数据组
    - 绘图 生成html
   
```go
package main

import (
	"github.com/go-echarts/go-echarts/v2/charts"
	"github.com/go-echarts/go-echarts/v2/opts"
	"math/rand"
	"os"
)

// 数据生成数据
func generateBarItems() []opts.BarData {
	items := make([]opts.BarData, 0)
	for i := 0; i < 7; i++ {
		items = append(items, opts.BarData{Value: rand.Intn(300)})
	}
	return items
}

func main() {
	// 1.New 一个条形图对象
	bar := charts.NewBar()
	// 2.设置 标题 和 子标题
	bar.SetGlobalOptions(charts.WithTitleOpts(opts.Title{
		Title:    "My first bar chart generated by go-echarts",
		Subtitle: "It's extremely easy to use, right?",
	}))

	// 3.设置 数据组
	bar.SetXAxis([]string{"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"}).
		AddSeries("Category A", generateBarItems()).
		AddSeries("Category B", generateBarItems())
	// 4.绘图 生成html
	f, _ := os.Create("bar.html")
	bar.Render(f)
}
```

2. 假设我们要把刚才的条形图，改成折线图，怎么做呢？

   类似的方式，我们可以得到折线图。
   仅仅修改了两处：
   - New 一个折线图对象
   - 设置 折线图数据
   
   同理，还有各种各样的图形，我们都可以生成，只需要创建对应的对象，填充数据即可，非常方便。

```go
package main

import (
	"github.com/go-echarts/go-echarts/v2/charts"
	"github.com/go-echarts/go-echarts/v2/opts"
	"math/rand"
	"os"
)

// generate random data for line chart
func generateLineItems2() []opts.LineData {
	items := make([]opts.LineData, 0)
	for i := 0; i < 7; i++ {
		items = append(items, opts.LineData{Value: rand.Intn(300)})
	}
	return items
}

func main() {
	// 1.New 一个折线图对象
	line := charts.NewLine()
	// 2.设置 标题 和 子标题
	line.SetGlobalOptions(charts.WithTitleOpts(opts.Title{
		Title:    "My first lines chart generated by go-echarts",
		Subtitle: "It's extremely easy to use, right?",
	}))

	// 3.设置 数据组
	line.SetXAxis([]string{"Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"}).
		AddSeries("Category A", generateLineItems2()).
		AddSeries("Category B", generateLineItems2()).
		SetSeriesOptions(charts.WithLineChartOpts(opts.LineChart{Smooth: true}))

	// 4.绘图 生成html
	f, _ := os.Create("lines.html")
	line.Render(f)
}

```

3. 可以直接生成图表的 http server，并http请求查看

```go

```

   



## 总结

[Shopify/sarama](https://github.com/Shopify/sarama) 这个库用来做kafka的golang客户端库，我给你说，这真不戳~~~

以上所有内容均采用最新官方案例做示例

## 参考资料

- [https://github.com/Shopify/sarama](https://github.com/Shopify/sarama)